<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>找灵感 - 家装助手</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        :root {
            --app-height: 790px;
            --app-width: 373px;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #000;
            color: #000;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            user-select: none;
        }

        .app-container {
            width: var(--app-width);
            height: var(--app-height);
            background: #ffffff;
            position: relative;
            overflow: hidden;
            border-radius: 40px;
            box-shadow: 0 0 0 12px rgba(255, 255, 255, 0.1);
        }
        
        .main-container {
            height: calc(100% - 60px);
            overflow-y: auto;
            background: linear-gradient(180deg, #fafafa 0%, #ffffff 100%);
            overscroll-behavior: none;
            padding-bottom: 150px;
        }
        
        .main-container::-webkit-scrollbar {
            display: none;
        }
        
        .nav-bar {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.03);
        }
        
        .nav-tab {
            position: relative;
            padding: 8px 4px;
            transition: all 0.3s ease;
        }

        .nav-tab:active {
            opacity: 0.7;
        }
        
        .tab-active {
            color: #000;
            font-weight: 600;
        }
        
        .tab-active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background-color: #000;
            border-radius: 50%;
        }

        .ai-message {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.98) 100%);
            border: 1px solid rgba(0, 0, 0, 0.04);
            border-radius: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.03);
            backdrop-filter: blur(20px);
            transform-origin: left top;
            animation: messageIn 0.3s cubic-bezier(0.2, 0.9, 0.3, 1);
        }
        
        .user-message {
            background: #000;
            color: #fff;
            border-radius: 20px;
            transform-origin: right bottom;
            animation: messageIn 0.3s cubic-bezier(0.2, 0.9, 0.3, 1);
        }
        
        .service-card {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(0, 0, 0, 0.04);
            border-radius: 24px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.04);
            backdrop-filter: blur(20px);
            transition: all 0.3s cubic-bezier(0.2, 0.9, 0.3, 1);
        }
        
        .service-card:active {
            transform: scale(0.98);
            background: rgba(255, 255, 255, 0.98);
        }

        .input-container {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(0, 0, 0, 0.04);
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            width: var(--app-width);
            margin: 0 auto;
            z-index: 10;
        }
        
        .input-box {
            background: rgba(0, 0, 0, 0.03);
            border: none;
            transition: all 0.3s ease;
        }
        
        .input-box:focus {
            background: rgba(0, 0, 0, 0.05);
            outline: none;
        }
        
        .send-button {
            background: #000;
            transition: all 0.3s cubic-bezier(0.2, 0.9, 0.3, 1);
        }
        
        .send-button:active {
            transform: scale(0.9);
        }

        .requirement-tag {
            background: rgba(0, 0, 0, 0.03);
            color: #000;
            transition: all 0.2s cubic-bezier(0.2, 0.9, 0.3, 1);
            border: 1px solid rgba(0, 0, 0, 0.06);
            border-radius: 100px;
        }

        .requirement-tag:active {
            background: rgba(0, 0, 0, 0.06) !important;
            transform: scale(0.95);
        }

        .case-image {
            position: relative;
            padding-top: 75%;
            overflow: hidden;
            border-radius: 16px;
        }

        .case-image img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .case-image:active img {
            transform: scale(1.05);
        }

        .case-tag {
            position: absolute;
            top: 12px;
            left: 12px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            padding: 6px 12px;
            border-radius: 100px;
            color: white;
            font-size: 12px;
            z-index: 1;
        }

        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .action-buttons {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(0, 0, 0, 0.04);
        }
        
        .action-button {
            background: transparent;
            color: #000;
            transition: all 0.2s ease;
            padding: 8px 0;
        }
        
        .action-button:active {
            opacity: 0.7;
            transform: scale(0.95);
        }

        /* 首次进入状态样式 */
        .welcome-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 0 24px;
            height: 45vh;
        }

        .welcome-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .welcome-subtitle {
            font-size: 16px;
            color: rgba(0, 0, 0, 0.6);
            line-height: 1.5;
            margin-bottom: 24px;
        }

        .quick-actions-container {
            background: white;
            border-radius: 24px 24px 0 0;
            padding: 24px 16px;
            height: 55vh;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.05);
        }

        .quick-action-button {
            background: rgba(0, 0, 0, 0.03);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
        }

        .quick-action-button:active {
            background: rgba(0, 0, 0, 0.06);
            transform: scale(0.98);
        }

        .quick-action-icon {
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
        }

        /* 添加半屏浮层相关样式 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(4px);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .half-screen-modal {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) translateY(100%);
            width: var(--app-width);
            height: 70%;
            background: #ffffff;
            border-radius: 24px 24px 0 0;
            z-index: 1000;
            transition: transform 0.3s cubic-bezier(0.2, 0.9, 0.3, 1);
        }

        .half-screen-modal.active {
            transform: translateX(-50%) translateY(0);
        }

        .progress-bar {
            height: 4px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #6366f1;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .toggle-switch {
            width: 44px;
            height: 24px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            padding: 2px;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: #6366f1;
        }

        .toggle-switch .toggle-handle {
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transform: translateX(0);
            transition: transform 0.3s ease;
        }

        .toggle-switch.active .toggle-handle {
            transform: translateX(20px);
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        /* 调试工具条 */
        .debug-toolbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #333;
            color: white;
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 9999;
        }

        .debug-toggle {
            background: #555;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 14px;
            cursor: pointer;
        }

        .debug-toggle.active {
            background: #4CAF50;
        }

        /* 底部导航样式统一 */
        .bottom-nav-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            width: var(--app-width);
            margin: 0 auto;
            z-index: 50;
            background: white;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="bg-black">
    <!-- 调试工具条 -->
    <div class="debug-toolbar">
        <div class="text-sm">调试工具</div>
        <div class="flex gap-2">
            <button class="debug-toggle active" id="firstTimeToggle">首次进入</button>
            <button class="debug-toggle" id="chatToggle">未绑定户型+无需求表达</button>
            <button class="debug-toggle" id="bindHouseToggle">绑定户型</button>
            <button class="debug-toggle" id="chatWithHouseToggle">已绑定户型+无需求表达</button>
            <button class="debug-toggle" id="chatWithHouseAndNeedsToggle">已绑定户型+有需求表达</button>
            <button class="debug-toggle" id="contentUpdateToggle">内容更新首页</button>
        </div>
    </div>

    <div class="app-container">
        <!-- 顶部导航栏 -->
        <div class="nav-bar sticky top-0 z-10">
            <div class="flex justify-between items-center px-8 py-4">
                <div class="nav-tab tab-active text-base">找灵感</div>
                <div class="nav-tab text-base text-black/40">邻居案例</div>
                <div class="nav-tab text-base text-black/40">找服务</div>
            </div>
        </div>
        
        <!-- 首次进入状态 -->
        <div class="main-container" id="firstTimeView">
            <!-- 欢迎语部分 -->
            <div class="welcome-container">
                <div class="welcome-title">嗨！我是设牛</div>
                <div class="welcome-subtitle">我可以帮您定制专属于您的个性化装修方案，解决您的问题，帮您整理需求</div>
                
                <!-- 添加我家户型模块 - 移到顶部 -->
                <div class="w-full mt-4">
                    <div class="service-card p-4">
                        <div class="flex items-center">
                            <i class="ri-home-4-line text-2xl mr-4"></i>
                            <div class="flex-1">
                                <h3 class="font-medium text-base mb-1">告诉我您家的户型信息</h3>
                                <p class="text-sm text-black/40">帮您找到同户型的装修案例~</p>
                            </div>
                            <i class="ri-arrow-right-s-line text-2xl"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 快捷操作部分 -->
            <div class="quick-actions-container">
                <!-- 快捷操作按钮 - 修改为更小的框+文字样式 -->
                <div class="flex justify-center gap-2 mb-6 px-4 w-full">
                    <button class="bg-black/5 rounded-xl px-2 py-1.5 text-xs">
                        看效果图
                    </button>
                    <button class="bg-black/5 rounded-xl px-2 py-1.5 text-xs">
                        修改需求
                    </button>
                    <button class="bg-black/5 rounded-xl px-2 py-1.5 text-xs">
                        看邻居案例
                    </button>
                    <button class="bg-black/5 rounded-xl px-2 py-1.5 text-xs">
                        为我推荐
                    </button>
                </div>
                
                <!-- 输入框 -->
                <div class="flex items-center gap-3 px-4 py-3 mb-6">
                    <input type="text" 
                           class="input-box flex-1 px-4 py-2.5 text-sm rounded-full"
                           placeholder="规划一个...">
                    <button class="send-button w-10 h-10 rounded-full flex items-center justify-center">
                        <i class="ri-send-plane-fill text-white text-lg"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 对话状态 -->
        <div class="main-container hidden" id="chatView">
            <div class="p-4">
                <!-- AI欢迎消息 -->
                <div class="mb-6">
                    <div class="ai-message p-4">
                        <div class="flex items-start gap-3">
                            <i class="ri-robot-line text-2xl"></i>
                            <div>
                                <div class="font-medium mb-2">Hi，我是您的装修助手设牛</div>
                                <p class="text-sm text-black/60 leading-relaxed">很高兴为您服务！告诉我您的装修想法，我会根据您的需求推荐合适的方案~</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 功能卡片组 -->
                <div class="space-y-3 mb-6">
                    <div class="service-card p-4" id="bindHouseCard">
                        <div class="flex items-center">
                            <i class="ri-home-4-line text-2xl mr-4"></i>
                            <div class="flex-1">
                                <h3 class="font-medium text-base mb-1">填写您家户型</h3>
                                <p class="text-sm text-black/40">帮您找到同户型的装修案例~</p>
                            </div>
                            <i class="ri-arrow-right-s-line text-2xl"></i>
                        </div>
                    </div>
                </div>

                <!-- 用户发言 - 绑定户型 -->
                <div class="flex justify-end mb-6">
                    <div class="user-message px-4 py-3 max-w-[85%]">
                        <p>我家是北三环中路43号院，两室一厅，90平米</p>
                    </div>
                </div>

                <!-- 绑定户型成功消息 -->
                <div class="mb-6">
                    <div class="ai-message p-4">
                        <div class="flex items-start gap-3">
                            <i class="ri-robot-line text-2xl"></i>
                            <div>
                                <div class="font-medium mb-2">已成功绑定您的户型信息</div>
                                <p class="text-sm text-black/60 leading-relaxed">北三环中路43号院 · 两室一厅 · 90平米</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 案例展示 - 相似户型 -->
                <div class="service-card p-4 mb-6">
                    <h3 class="font-medium text-base mb-4">为您找到与您的户型相似度95%的设计方案</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">相似度95%</div>
                                <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例1">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">90m² · 两室一厅 · 12万 · 现代简约</div>
                        </div>
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">相似度93%</div>
                                <img src="https://images.unsplash.com/photo-1583847268964-b28dc8f51f92?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例2">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">92m² · 两室一厅 · 15万 · 日式风格</div>
                        </div>
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">相似度90%</div>
                                <img src="https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例3">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">88m² · 两室一厅 · 11万 · 北欧风格</div>
                        </div>
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">相似度88%</div>
                                <img src="https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例4">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">95m² · 两室一厅 · 14万 · 混搭风格</div>
                        </div>
                    </div>
                </div>

                <!-- AI提示消息 -->
                <div class="mb-6">
                    <div class="ai-message p-4">
                        <div class="flex items-start gap-3">
                            <i class="ri-robot-line text-2xl"></i>
                            <div>
                                <div class="font-medium mb-2">和我聊聊您的装修想法</div>
                                <p class="text-sm text-black/60 leading-relaxed">告诉我您的需求和喜好，我会为您推荐更合适的设计方案~</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 用户发言 - 表达需求 -->
                <div class="flex justify-end mb-6">
                    <div class="user-message px-4 py-3 max-w-[85%]">
                        <p>我有小孩，喜欢更多收纳空间</p>
                    </div>
                </div>

                <!-- 案例展示 - 满足需求 -->
                <div class="service-card p-4 mb-6">
                    <h3 class="font-medium text-base mb-4">适合有小孩具备超多收纳空间的设计方案</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">儿童友好</div>
                                <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例1">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">90m² · 两室一厅 · 12万 · 现代简约</div>
                        </div>
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">超多收纳</div>
                                <img src="https://images.unsplash.com/photo-1583847268964-b28dc8f51f92?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例2">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">92m² · 两室一厅 · 15万 · 日式风格</div>
                        </div>
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">儿童友好</div>
                                <img src="https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例3">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">88m² · 两室一厅 · 11万 · 北欧风格</div>
                        </div>
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">超多收纳</div>
                                <img src="https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例4">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">95m² · 两室一厅 · 14万 · 混搭风格</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 底部功能区 -->
            <div class="bottom-nav-container">
                <!-- 功能按钮 -->
                <div class="grid grid-cols-4 gap-2 px-4 py-2">
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-image-line text-xl mb-1"></i>
                        <span class="text-xs">看效果图</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-edit-line text-xl mb-1"></i>
                        <span class="text-xs">修改需求</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-calculator-line text-xl mb-1"></i>
                        <span class="text-xs">算算报价</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-thumb-up-line text-xl mb-1"></i>
                        <span class="text-xs">为我推荐</span>
                    </button>
                </div>
                
                <!-- 输入框 -->
                <div class="flex items-center gap-3 px-4 py-3 border-t border-black/5">
                    <input type="text" 
                           class="input-box flex-1 px-4 py-2.5 text-sm rounded-full"
                           placeholder="请输入您的装修需求...">
                    <button class="send-button w-10 h-10 rounded-full flex items-center justify-center">
                        <i class="ri-send-plane-fill text-white text-lg"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- 已绑定户型但未表达需求的对话状态 -->
        <div class="main-container hidden" id="chatWithHouseView">
            <div class="p-4">
                <!-- 已绑定户型信息 -->
                <div class="service-card p-4 mb-6">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-12 h-12 bg-black/5 rounded-xl flex items-center justify-center">
                            <i class="ri-map-pin-line text-2xl"></i>
                        </div>
                        <div>
                            <div class="text-lg font-medium">北三环中路43号院</div>
                            <div class="text-sm text-black/40">三室一厅/120平</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 mb-4">
                        <div class="w-8 h-8 bg-black/5 rounded-xl flex items-center justify-center">
                            <i class="ri-bookmark-line text-xl"></i>
                        </div>
                        <div class="text-lg font-medium">评分 9.4 分</div>
                    </div>
                </div>

                <!-- AI欢迎消息 -->
                <div class="mb-6">
                    <div class="ai-message p-4">
                        <div class="flex items-start gap-3">
                            <i class="ri-robot-line text-2xl"></i>
                            <div>
                                <div class="font-medium mb-2">Hi，我是您的装修助手设牛</div>
                                <p class="text-sm text-black/60 leading-relaxed">很高兴为您服务！我看到您已经绑定了户型信息，请告诉我您的装修需求，我会为您推荐合适的方案~</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 引导用户表达需求模块 -->
                <div class="service-card p-4 mb-6">
                    <h3 class="font-medium text-base mb-4">和我聊聊您的装修想法</h3>
                    <div class="flex flex-wrap gap-2">
                        <button class="requirement-tag px-5 py-2.5 rounded-full text-sm">
                            我想要开放式厨房
                        </button>
                        <button class="requirement-tag px-5 py-2.5 rounded-full text-sm">
                            更大的运动空间
                        </button>
                        <button class="requirement-tag px-5 py-2.5 rounded-full text-sm">
                            需要儿童房
                        </button>
                        <button class="requirement-tag px-5 py-2.5 rounded-full text-sm">
                            喜欢北欧风格
                        </button>
                        <button class="requirement-tag px-5 py-2.5 rounded-full text-sm">
                            预算15万以内
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 底部功能区 -->
            <div class="bottom-nav-container">
                <!-- 功能按钮 -->
                <div class="grid grid-cols-4 gap-2 px-4 py-2">
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-image-line text-xl mb-1"></i>
                        <span class="text-xs">看效果图</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-edit-line text-xl mb-1"></i>
                        <span class="text-xs">修改需求</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-calculator-line text-xl mb-1"></i>
                        <span class="text-xs">算算报价</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-thumb-up-line text-xl mb-1"></i>
                        <span class="text-xs">为我推荐</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- 已绑定户型且已表达需求的对话状态 -->
        <div class="main-container hidden" id="chatWithHouseAndNeedsView">
            <div class="p-4">
                <!-- 已绑定户型信息 -->
                <div class="service-card p-4 mb-6">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-12 h-12 bg-black/5 rounded-xl flex items-center justify-center">
                            <i class="ri-map-pin-line text-2xl"></i>
                        </div>
                        <div>
                            <div class="text-lg font-medium">北三环中路43号院</div>
                            <div class="text-sm text-black/40">三室一厅/120平</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 bg-black/5 rounded-xl flex items-center justify-center">
                            <i class="ri-bookmark-line text-xl"></i>
                        </div>
                        <div class="text-lg font-medium">评分 9.4 分</div>
                    </div>
                </div>

                <!-- AI欢迎消息 -->
                <div class="mb-6">
                    <div class="ai-message p-4">
                        <div class="flex items-start gap-3">
                            <i class="ri-robot-line text-2xl"></i>
                            <div>
                                <div class="font-medium mb-2">Hi，我是您的装修助手设牛</div>
                                <p class="text-sm text-black/60 leading-relaxed">很高兴为您服务！我已经了解了您的需求，为您推荐了以下方案~</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- AI发言 - 需求表达 -->
                <div class="mb-6">
                    <div class="ai-message p-4">
                        <div class="flex items-start gap-3">
                            <i class="ri-robot-line text-2xl"></i>
                            <div>
                                <div class="font-medium mb-2">三代同堂的家庭，需要一个适合老人和孩子的方案</div>
                                <p class="text-sm text-black/60 leading-relaxed">根据您的需求，我为您找到了以下适合老人和孩子的装修方案</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 案例展示 -->
                <div class="service-card p-4 mb-6">
                    <h3 class="font-medium text-base mb-4">为您找到适合老人&小孩的装修方案</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">同小区同户型</div>
                                <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例1">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">90m² · 两室一厅 · 12万 · 现代简约</div>
                            <div class="text-sm line-clamp-2">三代同堂 | 老人房与儿童房的巧妙布局</div>
                        </div>
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">同小区同户型</div>
                                <img src="https://images.unsplash.com/photo-1583847268964-b28dc8f51f92?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例2">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">92m² · 两室一厅 · 15万 · 日式风格</div>
                            <div class="text-sm line-clamp-2">三代同堂 | 温馨舒适的家庭空间</div>
                        </div>
                    </div>
                </div>
                
                <!-- 引导用户表达需求模块 -->
                <div class="service-card p-4 mb-6">
                    <h3 class="font-medium text-base mb-4">告诉我您的更多需求，让我为您找到更适合您的设计方案</h3>
                    <div class="flex flex-wrap gap-2">
                        <button class="requirement-tag px-5 py-2.5 rounded-full text-sm">
                            我想要开放式厨房
                        </button>
                        <button class="requirement-tag px-5 py-2.5 rounded-full text-sm">
                            更大的运动空间
                        </button>
                        <button class="requirement-tag px-5 py-2.5 rounded-full text-sm">
                            需要老人房
                        </button>
                        <button class="requirement-tag px-5 py-2.5 rounded-full text-sm">
                            需要儿童房
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 底部功能区 -->
            <div class="bottom-nav-container">
                <!-- 功能按钮 -->
                <div class="grid grid-cols-4 gap-2 px-4 py-2">
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-image-line text-xl mb-1"></i>
                        <span class="text-xs">看效果图</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-edit-line text-xl mb-1"></i>
                        <span class="text-xs">修改需求</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-calculator-line text-xl mb-1"></i>
                        <span class="text-xs">算算报价</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-thumb-up-line text-xl mb-1"></i>
                        <span class="text-xs">为我推荐</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- 绑定户型页面 -->
        <div class="main-container hidden" id="bindHouseView">
            <div class="p-4">
                <!-- 顶部标题 -->
                <div class="mb-6">
                    <div class="flex items-center">
                        <button class="w-8 h-8 flex items-center justify-center mr-2" id="backFromBindHouse">
                            <i class="ri-arrow-left-line text-xl"></i>
                        </button>
                        <h2 class="text-lg font-medium">填写您家的户型信息</h2>
                    </div>
                </div>
                
                <!-- 户型信息表单 -->
                <div class="space-y-5">
                    <!-- 小区名称 -->
                    <div>
                        <label class="block text-sm font-medium mb-2">小区名称</label>
                        <input type="text" 
                               class="w-full px-4 py-3 bg-black/3 rounded-xl text-sm"
                               placeholder="请输入您家的小区名称">
                    </div>
                    
                    <!-- 户型选择 -->
                    <div>
                        <label class="block text-sm font-medium mb-2">户型</label>
                        <div class="grid grid-cols-4 gap-2">
                            <button class="bg-black/3 rounded-xl py-2 text-sm">一室</button>
                            <button class="bg-black text-white rounded-xl py-2 text-sm">两室</button>
                            <button class="bg-black/3 rounded-xl py-2 text-sm">三室</button>
                            <button class="bg-black/3 rounded-xl py-2 text-sm">四室+</button>
                        </div>
                    </div>
                    
                    <!-- 面积选择 -->
                    <div>
                        <label class="block text-sm font-medium mb-2">面积</label>
                        <div class="grid grid-cols-3 gap-2">
                            <button class="bg-black/3 rounded-xl py-2 text-sm">0-60㎡</button>
                            <button class="bg-black/3 rounded-xl py-2 text-sm">60-70㎡</button>
                            <button class="bg-black/3 rounded-xl py-2 text-sm">70-80㎡</button>
                            <button class="bg-black/3 rounded-xl py-2 text-sm">80-90㎡</button>
                            <button class="bg-black text-white rounded-xl py-2 text-sm">90-120㎡</button>
                            <button class="bg-black/3 rounded-xl py-2 text-sm">120㎡以上</button>
                        </div>
                    </div>
                    
                    <!-- 上传户型图 -->
                    <div class="mt-6">
                        <div class="border-2 border-dashed border-black/10 rounded-xl p-6 flex flex-col items-center justify-center">
                            <i class="ri-upload-cloud-line text-3xl mb-2 text-black/40"></i>
                            <div class="text-base font-medium mb-1">上传户型图</div>
                            <p class="text-sm text-black/40 text-center mb-4">上传您的户型图，我们将为您匹配最适合的装修方案</p>
                            <button class="bg-black text-white px-4 py-2 rounded-xl text-sm">选择文件</button>
                        </div>
                    </div>
                </div>
                
                <!-- 提交按钮 -->
                <div class="mt-8">
                    <button class="w-full bg-black text-white py-3.5 rounded-2xl text-sm font-medium" id="submitHouseInfo">
                        确认提交
                    </button>
                </div>
            </div>
        </div>

        <!-- 内容更新首页 -->
        <div class="main-container hidden" id="contentUpdateView">
            <div class="p-4">
                <!-- 欢迎语部分 -->
                <div class="mb-6 text-center">
                    <div class="text-2xl font-semibold mb-2">嗨，我是设牛！</div>
                    <div class="text-sm text-black/60">我可以帮你定制专属于你的个性化装修方案，帮您整理您的居住需求。</div>
                </div>
                
                <!-- 已绑定户型信息 -->
                <div class="service-card p-4 mb-6">
                    <div class="flex items-center">
                        <i class="ri-home-4-line text-2xl mr-4"></i>
                        <div class="flex-1">
                            <div class="flex items-center">
                                <i class="ri-checkbox-circle-fill text-green-500 mr-1"></i>
                                <span class="text-sm text-green-500">已成功绑定您的户型信息</span>
                            </div>
                            <h3 class="font-medium text-base mb-1">北三环中路43号院 · 两室一厅 · 90平米</h3>
                        </div>
                    </div>
                </div>
                
                <!-- 内容更新模块 -->
                <div class="service-card p-4 mb-6">
                    <h3 class="font-medium text-base mb-4">适合三代同堂的设计方案更新了，具备更多的收纳空间</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">新方案</div>
                                <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例1">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">90m² · 两室一厅 · 12万 · 现代简约</div>
                        </div>
                        <div class="space-y-3">
                            <div class="case-image">
                                <div class="case-tag">新方案</div>
                                <img src="https://images.unsplash.com/photo-1583847268964-b28dc8f51f92?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" 
                                     alt="案例2">
                            </div>
                            <div class="flex items-center gap-1 text-xs text-black/40">
                                <i class="ri-map-pin-line"></i>
                                <span>昌平·新龙城</span>
                            </div>
                            <div class="text-xs">92m² · 两室一厅 · 15万 · 日式风格</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 底部功能区 -->
            <div class="bottom-nav-container">
                <!-- 功能按钮 -->
                <div class="grid grid-cols-4 gap-2 px-4 py-2">
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-image-line text-xl mb-1"></i>
                        <span class="text-xs">看效果图</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-edit-line text-xl mb-1"></i>
                        <span class="text-xs">修改需求</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-calculator-line text-xl mb-1"></i>
                        <span class="text-xs">算算报价</span>
                    </button>
                    <button class="action-button flex flex-col items-center">
                        <i class="ri-thumb-up-line text-xl mb-1"></i>
                        <span class="text-xs">为我推荐</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 导航标签切换
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    if (this.classList.contains('tab-active')) return;
                    
                    const tabName = this.textContent.trim();
                    switch(tabName) {
                        case '邻居案例':
                            window.location.href = 'solutions.html';
                            break;
                        case '找服务':
                            window.location.href = 'services.html';
                            break;
                    }
                });
            });

            // 调试工具切换视图
            const firstTimeToggle = document.getElementById('firstTimeToggle');
            const chatToggle = document.getElementById('chatToggle');
            const bindHouseToggle = document.getElementById('bindHouseToggle');
            const chatWithHouseToggle = document.getElementById('chatWithHouseToggle');
            const chatWithHouseAndNeedsToggle = document.getElementById('chatWithHouseAndNeedsToggle');
            const firstTimeView = document.getElementById('firstTimeView');
            const chatView = document.getElementById('chatView');
            const bindHouseView = document.getElementById('bindHouseView');
            const chatWithHouseView = document.getElementById('chatWithHouseView');
            const chatWithHouseAndNeedsView = document.getElementById('chatWithHouseAndNeedsView');
            const contentUpdateToggle = document.getElementById('contentUpdateToggle');
            const contentUpdateView = document.getElementById('contentUpdateView');
            
            function hideAllViews() {
                firstTimeView.classList.add('hidden');
                chatView.classList.add('hidden');
                bindHouseView.classList.add('hidden');
                chatWithHouseView.classList.add('hidden');
                chatWithHouseAndNeedsView.classList.add('hidden');
                contentUpdateView.classList.add('hidden');
                
                firstTimeToggle.classList.remove('active');
                chatToggle.classList.remove('active');
                bindHouseToggle.classList.remove('active');
                chatWithHouseToggle.classList.remove('active');
                chatWithHouseAndNeedsToggle.classList.remove('active');
                contentUpdateToggle.classList.remove('active');
            }

            firstTimeToggle.addEventListener('click', function() {
                hideAllViews();
                firstTimeToggle.classList.add('active');
                firstTimeView.classList.remove('hidden');
            });
            
            chatToggle.addEventListener('click', function() {
                hideAllViews();
                chatToggle.classList.add('active');
                chatView.classList.remove('hidden');
            });
            
            bindHouseToggle.addEventListener('click', function() {
                hideAllViews();
                bindHouseToggle.classList.add('active');
                bindHouseView.classList.remove('hidden');
            });
            
            chatWithHouseToggle.addEventListener('click', function() {
                hideAllViews();
                chatWithHouseToggle.classList.add('active');
                chatWithHouseView.classList.remove('hidden');
            });
            
            chatWithHouseAndNeedsToggle.addEventListener('click', function() {
                hideAllViews();
                chatWithHouseAndNeedsToggle.classList.add('active');
                chatWithHouseAndNeedsView.classList.remove('hidden');
            });
            
            contentUpdateToggle.addEventListener('click', function() {
                hideAllViews();
                contentUpdateToggle.classList.add('active');
                contentUpdateView.classList.remove('hidden');
            });
            
            // 首次进入状态的输入框点击事件
            const firstTimeInput = firstTimeView.querySelector('.input-box');
            firstTimeInput.addEventListener('click', function() {
                chatToggle.click(); // 切换到对话状态
            });
            
            // 快捷操作按钮点击事件
            const quickActionButtons = firstTimeView.querySelectorAll('button');
            quickActionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    chatToggle.click(); // 切换到对话状态
                    const actionText = this.textContent.trim();
                    const chatInput = chatView.querySelector('.input-box');
                    chatInput.value = `我想${actionText}`;
                });
            });
            
            // 添加我家户型模块点击事件
            const addHouseTypeCard = firstTimeView.querySelector('.service-card');
            if (addHouseTypeCard) {
                addHouseTypeCard.addEventListener('click', function() {
                    bindHouseToggle.click(); // 切换到绑定户型状态
                });
            }
            
            // 绑定户型页面返回按钮点击事件
            const backFromBindHouse = document.getElementById('backFromBindHouse');
            if (backFromBindHouse) {
                backFromBindHouse.addEventListener('click', function() {
                    firstTimeToggle.click(); // 返回首次进入状态
                });
            }
            
            // 绑定户型页面提交按钮点击事件
            const submitHouseInfo = document.getElementById('submitHouseInfo');
            if (submitHouseInfo) {
                submitHouseInfo.addEventListener('click', function() {
                    chatWithHouseToggle.click(); // 切换到已绑定户型状态
                });
            }
            
            // 对话状态页面的绑定户型卡片点击事件
            const bindHouseCard = document.getElementById('bindHouseCard');
            if (bindHouseCard) {
                bindHouseCard.addEventListener('click', function() {
                    bindHouseToggle.click(); // 切换到绑定户型状态
                });
            }
            
            // 对话状态页面的聊聊装修想法卡片点击事件
            const chatIdeasCard = document.getElementById('chatIdeasCard');
            if (chatIdeasCard) {
                chatIdeasCard.addEventListener('click', function() {
                    showRequirementModal(); // 显示需求表达半屏浮层
                });
            }
            
            // AI提示消息点击事件 - 添加这段代码
            const aiMessages = document.querySelectorAll('.ai-message');
            aiMessages.forEach(message => {
                const titleElement = message.querySelector('.font-medium');
                if (titleElement && titleElement.textContent.trim() === '和我聊聊您的装修想法') {
                    message.addEventListener('click', function() {
                        showRequirementModal(); // 显示需求表达半屏浮层
                    });
                    message.style.cursor = 'pointer'; // 添加手型光标样式
                }
            });
            
            // 半屏浮层相关函数
            function showRequirementModal() {
                document.getElementById('modalOverlay').classList.add('active');
                document.getElementById('requirementModal').classList.add('active');
            }

            function closeRequirementModal() {
                document.getElementById('modalOverlay').classList.remove('active');
                document.getElementById('requirementModal').classList.remove('active');
            }

            function adjustMembers(delta) {
                const countElement = document.getElementById('memberCount');
                let count = parseInt(countElement.textContent);
                count = Math.max(1, Math.min(10, count + delta));
                countElement.textContent = count;
            }

            function toggleSwitch(element) {
                element.classList.toggle('active');
            }

            // 需求标签点击事件
            const requirementTags = document.querySelectorAll('.requirement-tag');
            requirementTags.forEach(tag => {
                tag.addEventListener('click', function() {
                    // 如果当前是已绑定户型状态，则切换到已绑定户型且已表达需求的状态
                    if (!chatWithHouseView.classList.contains('hidden')) {
                        chatWithHouseAndNeedsToggle.click();
                    }
                });
            });

            // 点击遮罩关闭浮层
            const modalOverlay = document.getElementById('modalOverlay');
            if (modalOverlay) {
                modalOverlay.addEventListener('click', closeRequirementModal);
            }
        });
    </script>

    <!-- 半屏浮层遮罩 -->
    <div class="modal-overlay" id="modalOverlay"></div>

    <!-- 需求表达半屏浮层 -->
    <div class="half-screen-modal" id="requirementModal">
        <div class="p-4">
            <!-- 顶部进度条和标题 -->
            <div class="mb-6">
                <div class="flex items-center justify-between mb-3">
                    <div class="text-lg font-medium">定制专属我的装修方案</div>
                    <button class="text-black/40" onclick="closeRequirementModal()">
                        <i class="ri-close-line text-xl"></i>
                    </button>
                </div>
                <div class="flex items-center gap-2">
                    <div class="progress-bar flex-1">
                        <div class="progress-fill" style="width: 50%"></div>
                    </div>
                    <div class="text-sm text-black/40">1/2</div>
                </div>
            </div>

            <!-- 我家住几口 -->
            <div class="mb-6">
                <div class="text-base font-medium mb-1">我家住几口</div>
                <div class="text-sm text-black/60 mb-3">打造专属自己的个性化空间，你说我做，百分百满足所有需求</div>
                <div class="flex items-center justify-between bg-black/3 rounded-2xl p-3">
                    <div class="text-base">家庭成员</div>
                    <div class="flex items-center gap-4">
                        <button class="text-xl" onclick="adjustMembers(-1)">-</button>
                        <span class="text-base w-8 text-center" id="memberCount">3</span>
                        <button class="text-xl" onclick="adjustMembers(1)">+</button>
                    </div>
                </div>
            </div>

            <!-- 特殊需求 -->
            <div class="mb-6">
                <div class="space-y-3">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <i class="ri-user-smile-line text-xl"></i>
                            <span>我还有娃</span>
                        </div>
                        <div class="toggle-switch" onclick="toggleSwitch(this)">
                            <div class="toggle-handle"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <i class="ri-user-heart-line text-xl"></i>
                            <span>家有老人</span>
                        </div>
                        <div class="toggle-switch" onclick="toggleSwitch(this)">
                            <div class="toggle-handle"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 我的生活 -->
            <div class="mb-6">
                <div class="text-base font-medium mb-1">我的生活</div>
                <div class="text-sm text-black/60 mb-3">你说我做，打造最适合的空间布局</div>
                <div class="space-y-3">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <i class="ri-restaurant-line text-xl"></i>
                            <span>喜欢开放式厨房</span>
                        </div>
                        <div class="toggle-switch" onclick="toggleSwitch(this)">
                            <div class="toggle-handle"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <i class="ri-home-smile-line text-xl"></i>
                            <span>喜欢超大客厅</span>
                        </div>
                        <div class="toggle-switch" onclick="toggleSwitch(this)">
                            <div class="toggle-handle"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <i class="ri-archive-line text-xl"></i>
                            <span>需要更多收纳空间</span>
                        </div>
                        <div class="toggle-switch" onclick="toggleSwitch(this)">
                            <div class="toggle-handle"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <i class="ri-computer-line text-xl"></i>
                            <span>需要办公空间</span>
                        </div>
                        <div class="toggle-switch" onclick="toggleSwitch(this)">
                            <div class="toggle-handle"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 底部按钮 -->
            <button class="w-full bg-black text-white py-3 rounded-2xl text-base font-medium active:opacity-90 active:transform active:scale-98">
                我家方案定制完成！
            </button>
        </div>
    </div>
</body>
</html> 